{% extends "base.html" %}

{% block title %}Register - LoyaltyApp{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 2rem auto;">
    <article>
        <header style="text-align: center; margin-bottom: 2rem;">
            <h1 style="color: var(--primary-color);">ðŸŽ‰ Join LoyaltyApp</h1>
            <p>Create your account and start earning points today!</p>
        </header>
        
        <form method="POST">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.username.label(class="form-label") }}
                {{ form.username(class="form-control", placeholder="Choose a unique username", autocomplete="username") }}
            </div>
            
            <div class="form-group">
                {{ form.email.label(class="form-label") }}
                {{ form.email(class="form-control", placeholder="Enter your email address", autocomplete="email") }}
            </div>

            <div class="form-group">
                {{ form.phone.label(class="form-label") }}
                {{ form.phone(class="form-control", placeholder="Enter your phone number", autocomplete="tel") }}
            </div>
            
            <div class="form-group">
                {{ form.password.label(class="form-label") }}
                {{ form.password(class="form-control", placeholder="Create a strong password", autocomplete="new-password") }}
            </div>

            <div class="form-group">
                {{ form.confirm_password.label(class="form-label") }}
                {{ form.confirm_password(class="form-control", placeholder="Confirm your password", autocomplete="new-password") }}
            </div>
            
            <div class="form-group">
                {{ form.user_type.label(class="form-label") }}
                {{ form.user_type(class="form-control") }}
            </div>
            
            <div class="merchant-fields" style="display: none;">
                <div class="form-group">
                    {{ form.business_name.label(class="form-label") }}
                    {{ form.business_name(class="form-control", placeholder="Enter your restaurant/business name") }}
                </div>

                <div class="form-group">
                    {{ form.address.label(class="form-label") }}
                    {{ form.address(class="form-control", placeholder="Enter your business address") }}
                </div>
            </div>
            
            <div class="form-actions">
                {{ form.submit(class="primary", style="width: 100%;") }}
            </div>
        </form>
        
        <footer style="text-align: center; margin-top: 2rem;">
            <p>
                Already have an account? 
                <a href="{{ url_for('auth.login') }}" style="color: var(--primary-color); font-weight: bold;">
                    Sign in here
                </a>
            </p>
        </footer>
    </article>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const userTypeSelect = document.getElementById('user_type');
    const merchantFields = document.querySelector('.merchant-fields');
    const businessNameInput = document.getElementById('business_name');
    const addressInput = document.getElementById('address');

    userTypeSelect.addEventListener('change', function() {
        if (this.value === 'merchant') {
            merchantFields.style.display = 'block';
            businessNameInput.required = true;
            addressInput.required = true;
        } else {
            merchantFields.style.display = 'none';
            businessNameInput.required = false;
            addressInput.required = false;
        }
    });
});
</script>
{% endblock %}
